@page



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Requests - Vista</title>
    <link rel="stylesheet" href="~/css/sidebar.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #f8b84e;
            --secondary-color: #5b5b5b;
            --light-gray: #f5f5f5;
            --border-color: #e0e0e0;
            --success-color: #4CAF50;
            --warning-color: #FFC107;
            --danger-color: #F44336;
            --info-color: #2196F3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #f9f9f9;
            display: flex;
            min-height: 100vh;
        }

        .dashboard-wrapper {
            display: flex;
            width: 100%;
        }


        /* Main Content Styles */
        .main-content {
            flex: 1;
            padding: 20px;
        }

        .content {
            padding: 20px;
        }

        h2 {
            margin-bottom: 20px;
            font-size: 32px;
            font-weight: bold;
        }

        /* Search and Filter Bar */
        .filter-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .search-input {
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
            width: 250px;
        }

        .filter-select {
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
            margin-left: 10px;
        }

        /* Request Cards */
        .requests-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .request-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
        }

        .request-card-header {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }

        .request-id {
            font-size: 14px;
            color: #888;
            margin-bottom: 5px;
        }

        .request-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 10px;
            color: var(--secondary-color);
        }

        .request-description {
            font-size: 14px;
            color: var(--secondary-color);
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .priority-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .high-priority {
            background-color: rgba(244, 67, 54, 0.1);
            color: #F44336;
        }

        .medium-priority {
            background-color: rgba(255, 193, 7, 0.1);
            color: #FFC107;
        }

        .low-priority {
            background-color: rgba(76, 175, 80, 0.1);
            color: #4CAF50;
        }

        .request-details {
            padding: 15px;
        }

        .detail-item {
            display: flex;
            margin-bottom: 10px;
            align-items: flex-start;
        }

            .detail-item i {
                margin-right: 10px;
                color: var(--secondary-color);
                font-size: 14px;
                margin-top: 2px;
            }

            .detail-item .detail-text {
                font-size: 14px;
                color: var(--secondary-color);
            }

        .request-submitter {
            padding: 15px;
            border-top: 1px solid var(--border-color);
            display: flex;
            align-items: center;
        }

        .submitter-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            margin-right: 10px;
        }

        .submitter-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--secondary-color);
        }

        .submitter-info {
            font-size: 12px;
            color: #888;
        }

        .request-actions {
            padding: 15px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
        }

        .action-btn {
            padding: 8px 15px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .view-btn {
            background-color: rgba(33, 150, 243, 0.1);
            color: #2196F3;
        }

            .view-btn:hover {
                background-color: rgba(33, 150, 243, 0.2);
            }

        .assign-btn {
            background-color: var(--primary-color);
            color: white;
        }

            .assign-btn:hover {
                background-color: #e8a93a;
            }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }

        .pagination-list {
            display: flex;
            list-style: none;
        }

        .pagination-item {
            margin: 0 5px;
        }

        .pagination-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            text-decoration: none;
            background-color: white;
            color: var(--secondary-color);
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

            .pagination-link:hover {
                background-color: rgba(248, 184, 78, 0.1);
                color: var(--primary-color);
            }

            .pagination-link.active {
                background-color: var(--primary-color);
                color: white;
            }

            .pagination-link.prev,
            .pagination-link.next {
                background-color: white;
                color: var(--secondary-color);
            }

        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal {
            background-color: white;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--secondary-color);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--secondary-color);
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 8px 20px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            margin-left: 10px;
        }

        .modal-btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .modal-btn-secondary {
            background-color: #f1f1f1;
            color: var(--secondary-color);
        }

        .assign-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .assign-option {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

            .assign-option:hover,
            .assign-option.selected {
                border-color: var(--primary-color);
                background-color: rgba(248, 184, 78, 0.05);
            }

        .assign-option-name {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .assign-option-role {
            font-size: 14px;
            color: #888;
        }
    </style>
</head>
<body>
    <div class="dashboard-wrapper">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <img src="~/Images/logo 1.png" alt="Vista Logo">
                <span>vista.</span>
            </div>

            <nav class="nav-menu">
                <ul>
                    <li>
                        <a href="/Officer/Officerdashboard">
                            <i class="fas fa-th-large"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="/Officer/OfficerAnnouncements">
                            <i class="fas fa-bullhorn"></i>
                            <span>Announcements</span>
                        </a>
                    </li>
                    <li>
                        <a href="/Officer/OfficerBillingPayments">
                            <i class="fas fa-file-invoice-dollar"></i>
                            <span>Billing & Payments</span>
                        </a>
                    </li>
                    <li>
                        <a href="~/Officer/OfficerFacilityReservation">
                            <i class="fas fa-calendar-check"></i>
                            <span>Facility Reservation</span>
                        </a>
                    </li>
                    <li class="active">
                        <a href="/Officer/OfficerServiceRequest">
                            <i class="fas fa-hands-helping"></i>
                            <span>Service Request</span>
                        </a>
                    </li>
                    <li>
                        <a href="/Officer/OfficerDocuments">
                            <i class="fas fa-file-alt"></i>
                            <span>Documents</span>
                        </a>
                    </li>
                    <li>
                        <a href="/Officer/OfficerEventCalendar">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Events Calendar</span>
                        </a>
                    </li>
                    <li>
                        <a href="/Officer/OfficerEditProfile">
                            <i class="fas fa-user-circle"></i>
                            <span>Edit Profile</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content">
                <h2>Service Request</h2>

                <!-- Search and Filter Bar -->
                <div class="filter-bar">
                    <div>
                        <input type="text" class="search-input" placeholder="Search Requests...">
                    </div>
                    <div>
                        <select class="filter-select">
                            <option value="">All categories</option>
                            <option value="electrical">Electrical</option>
                            <option value="plumbing">Plumbing</option>
                            <option value="structural">Structural</option>
                            <option value="landscape">Landscape</option>
                            <option value="security">Security</option>
                            <option value="common-areas">Common Areas</option>
                            <option value="other">Other</option>
                        </select>
                        <select class="filter-select">
                            <option value="">All priorities</option>
                            <option value="high">High Priority</option>
                            <option value="medium">Medium Priority</option>
                            <option value="low">Low Priority</option>
                        </select>
                        <select class="filter-select">
                            <option value="">Sort By Date (Newest)</option>
                            <option value="oldest">Sort By Date (Oldest)</option>
                            <option value="priority-high">Sort By Priority (High to Low)</option>
                            <option value="priority-low">Sort By Priority (Low to High)</option>
                        </select>
                    </div>
                </div>

                <!-- Request Cards -->
                <div class="requests-grid">
                    <!-- Request Card 1 -->
                    <div class="request-card">
                        <div class="request-card-header">
                            <div class="request-id">REQ-2025031</div>
                            <div class="request-title">Street Light Outage on Elm Street</div>
                            <span class="priority-badge high-priority">High Priority</span>
                        </div>
                        <div class="request-details">
                            <div class="request-description">
                                Multiple street lights are not functioning in the 200 block of Elm Street creating safety concerns for residents walking at night.
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-calendar"></i>
                                <div class="detail-text">Submitted on Mar 18, 2025</div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div class="detail-text">Block 4, Lot 7, Elm Street</div>
                            </div>
                        </div>
                        <div class="request-submitter">
                            <div class="submitter-avatar">JD</div>
                            <div>
                                <div class="submitter-name">John Doe</div>
                                <div class="submitter-info">123-456-7890 • johndoe@email.com</div>
                            </div>
                        </div>
                        <div class="request-actions">
                            <button class="action-btn view-btn">View Details</button>
                            <button class="action-btn assign-btn">Assign</button>
                        </div>
                    </div>

                    <!-- Request Card 2 -->
                    <div class="request-card">
                        <div class="request-card-header">
                            <div class="request-id">REQ-2025032</div>
                            <div class="request-title">Leaking Pipe in Common Area</div>
                            <span class="priority-badge medium-priority">Medium Priority</span>
                        </div>
                        <div class="request-details">
                            <div class="request-description">
                                There's a leaking pipe near the community garden that's causing water accumulation.
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-calendar"></i>
                                <div class="detail-text">Submitted on Mar 15, 2025</div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div class="detail-text">Community Garden Area</div>
                            </div>
                        </div>
                        <div class="request-submitter">
                            <div class="submitter-avatar">AS</div>
                            <div>
                                <div class="submitter-name">Alice Smith</div>
                                <div class="submitter-info">987-654-3210 • alice@email.com</div>
                            </div>
                        </div>
                        <div class="request-actions">
                            <button class="action-btn view-btn">View Details</button>
                            <button class="action-btn assign-btn">Assign</button>
                        </div>
                    </div>

                    <!-- Request Card 3 -->
                    <div class="request-card">
                        <div class="request-card-header">
                            <div class="request-id">REQ-2025033</div>
                            <div class="request-title">Broken Playground Equipment</div>
                            <span class="priority-badge high-priority">High Priority</span>
                        </div>
                        <div class="request-details">
                            <div class="request-description">
                                The swing set in the children's playground has broken chains, posing a safety hazard.
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-calendar"></i>
                                <div class="detail-text">Submitted on Mar 20, 2025</div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div class="detail-text">Community Playground</div>
                            </div>
                        </div>
                        <div class="request-submitter">
                            <div class="submitter-avatar">MJ</div>
                            <div>
                                <div class="submitter-name">Michael Johnson</div>
                                <div class="submitter-info">555-123-4567 • michael@email.com</div>
                            </div>
                        </div>
                        <div class="request-actions">
                            <button class="action-btn view-btn">View Details</button>
                            <button class="action-btn assign-btn">Assign</button>
                        </div>
                    </div>

                    <!-- Request Card 4 -->
                    <div class="request-card">
                        <div class="request-card-header">
                            <div class="request-id">REQ-2025034</div>
                            <div class="request-title">Overgrown Hedges</div>
                            <span class="priority-badge low-priority">Low Priority</span>
                        </div>
                        <div class="request-details">
                            <div class="request-description">
                                The hedges along the main entrance need trimming as they're obstructing the sidewalk.
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-calendar"></i>
                                <div class="detail-text">Submitted on Mar 10, 2025</div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div class="detail-text">Main Entrance</div>
                            </div>
                        </div>
                        <div class="request-submitter">
                            <div class="submitter-avatar">RW</div>
                            <div>
                                <div class="submitter-name">Robert Wilson</div>
                                <div class="submitter-info">333-444-5555 • robert@email.com</div>
                            </div>
                        </div>
                        <div class="request-actions">
                            <button class="action-btn view-btn">View Details</button>
                            <button class="action-btn assign-btn">Assign</button>
                        </div>
                    </div>

                    <!-- Request Card 5 -->
                    <div class="request-card">
                        <div class="request-card-header">
                            <div class="request-id">REQ-2025035</div>
                            <div class="request-title">Parking Lot Potholes</div>
                            <span class="priority-badge medium-priority">Medium Priority</span>
                        </div>
                        <div class="request-details">
                            <div class="request-description">
                                Several large potholes have developed in the visitor parking area, need repair.
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-calendar"></i>
                                <div class="detail-text">Submitted on Mar 17, 2025</div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div class="detail-text">Visitor Parking Lot</div>
                            </div>
                        </div>
                        <div class="request-submitter">
                            <div class="submitter-avatar">ED</div>
                            <div>
                                <div class="submitter-name">Emily Davis</div>
                                <div class="submitter-info">777-888-9999 • emily@email.com</div>
                            </div>
                        </div>
                        <div class="request-actions">
                            <button class="action-btn view-btn">View Details</button>
                            <button class="action-btn assign-btn">Assign</button>
                        </div>
                    </div>

                    <!-- Request Card 6 -->
                    <div class="request-card">
                        <div class="request-card-header">
                            <div class="request-id">REQ-2025036</div>
                            <div class="request-title">Broken Mailbox</div>
                            <span class="priority-badge low-priority">Low Priority</span>
                        </div>
                        <div class="request-details">
                            <div class="request-description">
                                Mailbox #12 is broken and won't stay closed, exposing mail to weather.
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-calendar"></i>
                                <div class="detail-text">Submitted on Mar 19, 2025</div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div class="detail-text">Mailbox Cluster B, #12</div>
                            </div>
                        </div>
                        <div class="request-submitter">
                            <div class="submitter-avatar">TB</div>
                            <div>
                                <div class="submitter-name">Thomas Brown</div>
                                <div class="submitter-info">222-333-4444 • thomas@email.com</div>
                            </div>
                        </div>
                        <div class="request-actions">
                            <button class="action-btn view-btn">View Details</button>
                            <button class="action-btn assign-btn">Assign</button>
                        </div>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="pagination">
                    <ul class="pagination-list">
                        <li class="pagination-item">
                            <a href="#" class="pagination-link prev">
                                <i class="fas fa-chevron-left"></i>
                            </a>
                        </li>
                        <li class="pagination-item">
                            <a href="#" class="pagination-link active">1</a>
                        </li>
                        <li class="pagination-item">
                            <a href="#" class="pagination-link">2</a>
                        </li>
                        <li class="pagination-item">
                            <a href="#" class="pagination-link">3</a>
                        </li>
                        <li class="pagination-item">
                            <a href="#" class="pagination-link next">
                                <i class="fas fa-chevron-right"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <!-- View Request Modal -->
    <div class="modal-overlay" id="viewModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Request Details</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <h3 id="modalRequestTitle">Street Light Outage on Elm Street</h3>
                <p class="request-id" id="modalRequestId">REQ-2025031</p>

                <div class="detail-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <div class="detail-text" id="modalRequestLocation">Block 4, Lot 7, Elm Street</div>
                </div>
                <div class="detail-item">
                    <i class="fas fa-calendar"></i>
                    <div class="detail-text" id="modalRequestDate">Submitted on Mar 18, 2025</div>
                </div>
                <div class="detail-item">
                    <i class="fas fa-tag"></i>
                    <div class="detail-text" id="modalRequestCategory">Category: Electrical</div>
                </div>
                <div class="detail-item">
                    <i class="fas fa-exclamation-circle"></i>
                    <div class="detail-text" id="modalRequestPriority">Priority: High</div>
                </div>
                <div class="detail-item">
                    <i class="fas fa-info-circle"></i>
                    <div class="detail-text" id="modalRequestStatus">Status: Pending</div>
                </div>

                <h4 style="margin-top: 20px; margin-bottom: 10px;">Description</h4>
                <p id="modalRequestDescription">Multiple street lights are not functioning in the 200 block of Elm Street creating safety concerns for residents walking at night. This area is heavily used by pedestrians in the evening and the darkness has created a hazardous situation.</p>

                <h4 style="margin-top: 20px; margin-bottom: 10px;">Attachments</h4>
                <div style="display: flex; gap: 10px;" id="modalRequestAttachments">
                    <div style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
                        <i class="fas fa-file-image"></i> street-light-1.jpg
                    </div>
                    <div style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
                        <i class="fas fa-file-image"></i> street-light-2.jpg
                    </div>
                </div>

                <h4 style="margin-top: 20px; margin-bottom: 10px;">Submitter Information</h4>
                <div class="detail-item">
                    <i class="fas fa-user"></i>
                    <div class="detail-text" id="modalRequestSubmitter">John Doe</div>
                </div>
                <div class="detail-item">
                    <i class="fas fa-phone"></i>
                    <div class="detail-text" id="modalRequestPhone">123-456-7890</div>
                </div>
                <div class="detail-item">
                    <i class="fas fa-envelope"></i>
                    <div class="detail-text" id="modalRequestEmail">johndoe@email.com</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary">Close</button>
                <button class="modal-btn modal-btn-primary" id="assignFromViewBtn">Assign Request</button>
            </div>
        </div>
    </div>

    <!-- Assign Request Modal -->
    <div class="modal-overlay" id="assignModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Assign Request</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <h3 id="assignRequestTitle">Street Light Outage on Elm Street</h3>
                <p class="request-id" id="assignRequestId">REQ-2025031</p>

                <div class="detail-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <div class="detail-text" id="assignRequestLocation">Block 4, Lot 7, Elm Street</div>
                </div>
                <div class="detail-item">
                    <i class="fas fa-exclamation-circle"></i>
                    <div class="detail-text" id="assignRequestPriority">Priority: High</div>
                </div>

                <h4 style="margin-top: 20px; margin-bottom: 10px;">Assign To</h4>
                <select class="filter-select" style="width: 100%; margin-bottom: 15px;" id="staffSelect">
                    <option value="">Select Staff Member</option>
                    <option value="electrician1">Michael Johnson (Electrician)</option>
                    <option value="electrician2">Sarah Williams (Electrician)</option>
                    <option value="maintenance1">Robert Brown (Maintenance)</option>
                    <option value="maintenance2">Emily Davis (Maintenance)</option>
                </select>

                <h4 style="margin-top: 20px; margin-bottom: 10px;">Or Choose From Available Staff</h4>
                <div class="assign-options">
                    <div class="assign-option" data-value="electrician1">
                        <div class="assign-option-name">Michael Johnson</div>
                        <div class="assign-option-role">Electrician</div>
                        <div style="font-size: 12px; color: #4CAF50; margin-top: 5px;">
                            <i class="fas fa-check-circle"></i> Available
                        </div>
                    </div>
                    <div class="assign-option" data-value="electrician2">
                        <div class="assign-option-name">Sarah Williams</div>
                        <div class="assign-option-role">Electrician</div>
                        <div style="font-size: 12px; color: #F44336; margin-top: 5px;">
                            <i class="fas fa-times-circle"></i> 2 active assignments
                        </div>
                    </div>
                    <div class="assign-option" data-value="maintenance1">
                        <div class="assign-option-name">Robert Brown</div>
                        <div class="assign-option-role">Maintenance Supervisor</div>
                        <div style="font-size: 12px; color: #4CAF50; margin-top: 5px;">
                            <i class="fas fa-check-circle"></i> Available
                        </div>
                    </div>
                    <div class="assign-option" data-value="maintenance2">
                        <div class="assign-option-name">Emily Davis</div>
                        <div class="assign-option-role">Maintenance Technician</div>
                        <div style="font-size: 12px; color: #FFC107; margin-top: 5px;">
                            <i class="fas fa-exclamation-circle"></i> 1 active assignment
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: 20px; margin-bottom: 10px;">Notes</h4>
                <textarea style="width: 100%; padding: 10px; border: 1px solid #e0e0e0; border-radius: 4px; min-height: 80px;" placeholder="Add any special instructions..." id="assignmentNotes"></textarea>

                <h4 style="margin-top: 20px; margin-bottom: 10px;">Priority</h4>
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <label style="display: flex; align-items: center;">
                        <input type="radio" name="priority" value="high" checked> High Priority
                    </label>
                    <label style="display: flex; align-items: center;">
                        <input type="radio" name="priority" value="medium"> Medium Priority
                    </label>
                    <label style="display: flex; align-items: center;">
                        <input type="radio" name="priority" value="low"> Low Priority
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary">Cancel</button>
                <button class="modal-btn modal-btn-primary" id="confirmAssignBtn">Confirm Assignment</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
                document.addEventListener('DOMContentLoaded', function() {
            // Modal elements
            const viewModal = document.getElementById('viewModal');
            const assignModal = document.getElementById('assignModal');

            // Buttons to open modals
            const viewButtons = document.querySelectorAll('.view-btn');
            const assignButtons = document.querySelectorAll('.assign-btn');

            // Close buttons
            const closeButtons = document.querySelectorAll('.modal-close, .modal-btn-secondary');

            // Navigation between modals
            const assignFromViewBtn = document.getElementById('assignFromViewBtn');
            const confirmAssignBtn = document.getElementById('confirmAssignBtn');

            // Assign options
            const assignOptions = document.querySelectorAll('.assign-option');
            const staffSelect = document.getElementById('staffSelect');

            // Sample request data (in a real app, this would come from your backend)
            const requestData = {
                'REQ-2025031': {
                    title: 'Street Light Outage on Elm Street',
                    location: 'Block 4, Lot 7, Elm Street',
                    date: 'Submitted on Mar 18, 2025',
                    category: 'Electrical',
                    priority: 'High',
                    status: 'Pending',
                    description: 'Multiple street lights are not functioning in the 200 block of Elm Street creating safety concerns for residents walking at night. This area is heavily used by pedestrians in the evening and the darkness has created a hazardous situation.',
                    attachments: [
                        { name: 'street-light-1.jpg', type: 'image' },
                        { name: 'street-light-2.jpg', type: 'image' }
                    ],
                    submitter: 'John Doe',
                    phone: '123-456-7890',
                    email: 'johndoe@email.com'
                },
                'REQ-2025032': {
                    title: 'Leaking Pipe in Common Area',
                    location: 'Community Garden Area',
                    date: 'Submitted on Mar 15, 2025',
                    category: 'Plumbing',
                    priority: 'Medium',
                    status: 'Pending',
                    description: 'There\'s a leaking pipe near the community garden that\'s causing water accumulation. The water is starting to affect nearby plants and create muddy conditions.',
                    attachments: [
                        { name: 'pipe-leak.jpg', type: 'image' }
                    ],
                    submitter: 'Alice Smith',
                    phone: '987-654-3210',
                    email: 'alice@email.com'
                },
                'REQ-2025033': {
                    title: 'Broken Playground Equipment',
                    location: 'Community Playground',
                    date: 'Submitted on Mar 20, 2025',
                    category: 'Structural',
                    priority: 'High',
                    status: 'Pending',
                    description: 'The swing set in the children\'s playground has broken chains, posing a safety hazard to children playing in the area.',
                    attachments: [
                        { name: 'broken-swing.jpg', type: 'image' },
                        { name: 'playground-area.jpg', type: 'image' }
                    ],
                    submitter: 'Michael Johnson',
                    phone: '555-123-4567',
                    email: 'michael@email.com'
                },
                'REQ-2025034': {
                    title: 'Overgrown Hedges',
                    location: 'Main Entrance',
                    date: 'Submitted on Mar 10, 2025',
                    category: 'Landscape',
                    priority: 'Low',
                    status: 'Pending',
                    description: 'The hedges along the main entrance need trimming as they\'re obstructing the sidewalk and making it difficult for pedestrians to pass.',
                    attachments: [
                        { name: 'hedges-photo.jpg', type: 'image' }
                    ],
                    submitter: 'Robert Wilson',
                    phone: '333-444-5555',
                    email: 'robert@email.com'
                },
                'REQ-2025035': {
                    title: 'Parking Lot Potholes',
                    location: 'Visitor Parking Lot',
                    date: 'Submitted on Mar 17, 2025',
                    category: 'Structural',
                    priority: 'Medium',
                    status: 'Pending',
                    description: 'Several large potholes have developed in the visitor parking area, need repair. These are causing damage to vehicles and are a tripping hazard.',
                    attachments: [
                        { name: 'pothole-1.jpg', type: 'image' },
                        { name: 'pothole-2.jpg', type: 'image' },
                        { name: 'parking-lot-overview.jpg', type: 'image' }
                    ],
                    submitter: 'Emily Davis',
                    phone: '777-888-9999',
                    email: 'emily@email.com'
                },
                'REQ-2025036': {
                    title: 'Broken Mailbox',
                    location: 'Mailbox Cluster B, #12',
                    date: 'Submitted on Mar 19, 2025',
                    category: 'Structural',
                    priority: 'Low',
                    status: 'Pending',
                    description: 'Mailbox #12 is broken and won\'t stay closed, exposing mail to weather and potential theft.',
                    attachments: [
                        { name: 'broken-mailbox.jpg', type: 'image' }
                    ],
                    submitter: 'Thomas Brown',
                    phone: '222-333-4444',
                    email: 'thomas@email.com'
                }
            };

            // Function to open view modal
            function openViewModal(requestId) {
                const request = requestData[requestId];
                if (!request) return;

                // Populate modal with request data
                document.getElementById('modalRequestTitle').textContent = request.title;
                document.getElementById('modalRequestId').textContent = requestId;
                document.getElementById('modalRequestLocation').textContent = request.location;
                document.getElementById('modalRequestDate').textContent = request.date;
                document.getElementById('modalRequestCategory').textContent = `Category: ${request.category}`;
                document.getElementById('modalRequestPriority').textContent = `Priority: ${request.priority}`;
                document.getElementById('modalRequestStatus').textContent = `Status: ${request.status}`;
                document.getElementById('modalRequestDescription').textContent = request.description;

                // Populate attachments
                const attachmentsContainer = document.getElementById('modalRequestAttachments');
                attachmentsContainer.innerHTML = '';
                request.attachments.forEach(attachment => {
                    const attachmentEl = document.createElement('div');
                    attachmentEl.style.background = '#f5f5f5';
                    attachmentEl.style.padding = '10px';
                    attachmentEl.style.borderRadius = '5px';
                    attachmentEl.innerHTML = `<i class="fas fa-file-${attachment.type}"></i> ${attachment.name}`;
                    attachmentsContainer.appendChild(attachmentEl);
                });

                // Populate submitter info
                document.getElementById('modalRequestSubmitter').textContent = request.submitter;
                document.getElementById('modalRequestPhone').textContent = request.phone;
                document.getElementById('modalRequestEmail').textContent = request.email;

                // Show modal
                viewModal.style.display = 'flex';
            }

            // Function to open assign modal
            function openAssignModal(requestId) {
                const request = requestData[requestId];
                if (!request) return;

                // Populate modal with request data
                document.getElementById('assignRequestTitle').textContent = request.title;
                document.getElementById('assignRequestId').textContent = requestId;
                document.getElementById('assignRequestLocation').textContent = request.location;
                document.getElementById('assignRequestPriority').textContent = `Priority: ${request.priority}`;

                // Set priority radio based on request priority
                const priorityRadios = document.querySelectorAll('input[name="priority"]');
                priorityRadios.forEach(radio => {
                    if (radio.value.toLowerCase() === request.priority.toLowerCase()) {
                        radio.checked = true;
                    }
                });

                // Reset assign options selection
                assignOptions.forEach(option => {
                    option.classList.remove('selected');
                });
                staffSelect.value = '';

                // Reset notes
                document.getElementById('assignmentNotes').value = '';

                // Show modal
                assignModal.style.display = 'flex';
            }

            // Add event listeners to view buttons
            viewButtons.forEach((button, index) => {
                button.addEventListener('click', () => {
                    // Get the request card and extract the request ID
                    const requestCard = button.closest('.request-card');
                    const requestId = requestCard.querySelector('.request-id').textContent;
                    openViewModal(requestId);
                });
            });

            // Add event listeners to assign buttons
            assignButtons.forEach((button, index) => {
                button.addEventListener('click', () => {
                    // Get the request card and extract the request ID
                    const requestCard = button.closest('.request-card');
                    const requestId = requestCard.querySelector('.request-id').textContent;
                    openAssignModal(requestId);
                });
            });

            // Add event listener to "Assign Request" button in view modal
            assignFromViewBtn.addEventListener('click', () => {
                const requestId = document.getElementById('modalRequestId').textContent;
                viewModal.style.display = 'none';
                openAssignModal(requestId);
            });

            // Add event listeners to close buttons
            closeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    viewModal.style.display = 'none';
                    assignModal.style.display = 'none';
                });
            });

            // Add event listeners to assign options
            assignOptions.forEach(option => {
                option.addEventListener('click', () => {
                    assignOptions.forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    staffSelect.value = option.dataset.value;
                });
            });

            // Staff select change event
            staffSelect.addEventListener('change', () => {
                assignOptions.forEach(option => {
                    option.classList.remove('selected');
                    if (option.dataset.value === staffSelect.value) {
                        option.classList.add('selected');
                    }
                });
            });

            // Add event listener to confirm assignment button
            confirmAssignBtn.addEventListener('click', () => {
                const requestId = document.getElementById('assignRequestId').textContent;
                const staffMember = staffSelect.value;
                const notes = document.getElementById('assignmentNotes').value;
                const selectedPriority = document.querySelector('input[name="priority"]:checked').value;

                if (!staffMember) {
                    Swal.fire({
                        title: 'Error!',
                        text: 'Please select a staff member to assign this request.',
                        icon: 'error',
                        confirmButtonText: 'Ok',
                        confirmButtonColor: '#f8b84e'
                    });
                    return;
                }

                // In a real application, you would send this data to your backend
                // For now, we'll just show a success message
                Swal.fire({
                    title: 'Success!',
                    text: `Request ${requestId} has been assigned to ${document.querySelector(`option[value="${staffMember}"]`).textContent}`,
                    icon: 'success',
                    confirmButtonText: 'Ok',
                    confirmButtonColor: '#f8b84e'
                }).then(() => {
                    assignModal.style.display = 'none';

                    // Update the UI to reflect the assignment
                    const requestCards = document.querySelectorAll('.request-card');
                    requestCards.forEach(card => {
                        if (card.querySelector('.request-id').textContent === requestId) {
                            // In a real app, you might update the card to show it's assigned
                            const assignBtn = card.querySelector('.assign-btn');
                            assignBtn.textContent = 'Reassign';
                            assignBtn.style.backgroundColor = '#5b5b5b';
                        }
                    });
                });
            });

            // Search functionality
            const searchInput = document.querySelector('.search-input');
            searchInput.addEventListener('input', () => {
                const searchTerm = searchInput.value.toLowerCase();
                const requestCards = document.querySelectorAll('.request-card');

                requestCards.forEach(card => {
                    const title = card.querySelector('.request-title').textContent.toLowerCase();
                    const description = card.querySelector('.request-description').textContent.toLowerCase();
                    const id = card.querySelector('.request-id').textContent.toLowerCase();
                    const location = card.querySelector('.detail-text').textContent.toLowerCase();

                    if (title.includes(searchTerm) || description.includes(searchTerm) ||
                        id.includes(searchTerm) || location.includes(searchTerm)) {
                        card.style.display = '';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });

            // Filter functionality
            const filterSelects = document.querySelectorAll('.filter-select');
            filterSelects.forEach(select => {
                select.addEventListener('change', () => {
                    const categoryFilter = filterSelects[0].value;
                    const priorityFilter = filterSelects[1].value;
                    const sortFilter = filterSelects[2].value;

                    const requestCards = document.querySelectorAll('.request-card');

                    // Hide/show cards based on category and priority filters
                    requestCards.forEach(card => {
                        const categoryMatch = !categoryFilter || requestData[card.querySelector('.request-id').textContent].category.toLowerCase() === categoryFilter;

                        let priorityMatch = true;
                        if (priorityFilter) {
                            const cardPriority = card.querySelector('.priority-badge').textContent.toLowerCase();
                            priorityMatch = cardPriority.includes(priorityFilter);
                        }

                        card.style.display = categoryMatch && priorityMatch ? '' : 'none';
                    });

                    // Sort cards
                    const requestGrid = document.querySelector('.requests-grid');
                    const cardsArray = Array.from(requestCards);

                    if (sortFilter === 'oldest') {
                        cardsArray.sort((a, b) => {
                            const dateA = new Date(requestData[a.querySelector('.request-id').textContent].date.replace('Submitted on ', ''));
                            const dateB = new Date(requestData[b.querySelector('.request-id').textContent].date.replace('Submitted on ', ''));
                            return dateA - dateB;
                        });
                    } else if (sortFilter === 'priority-high') {
                        cardsArray.sort((a, b) => {
                            const priorityOrder = { 'high priority': 0, 'medium priority': 1, 'low priority': 2 };
                            const priorityA = a.querySelector('.priority-badge').textContent.toLowerCase();
                            const priorityB = b.querySelector('.priority-badge').textContent.toLowerCase();
                            return priorityOrder[priorityA] - priorityOrder[priorityB];
                        });
                    } else if (sortFilter === 'priority-low') {
                        cardsArray.sort((a, b) => {
                            const priorityOrder = { 'high priority': 0, 'medium priority': 1, 'low priority': 2 };
                            const priorityA = a.querySelector('.priority-badge').textContent.toLowerCase();
                            const priorityB = b.querySelector('.priority-badge').textContent.toLowerCase();
                            return priorityOrder[priorityB] - priorityOrder[priorityA];
                        });
                    } else {
                        // Default: newest first
                        cardsArray.sort((a, b) => {
                            const dateA = new Date(requestData[a.querySelector('.request-id').textContent].date.replace('Submitted on ', ''));
                            const dateB = new Date(requestData[b.querySelector('.request-id').textContent].date.replace('Submitted on ', ''));
                            return dateB - dateA;
                        });
                    }

                    // Reappend cards in sorted order
                    cardsArray.forEach(card => {
                        requestGrid.appendChild(card);
                    });
                });
            });

            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === viewModal) {
                    viewModal.style.display = 'none';
                }
                if (e.target === assignModal) {
                    assignModal.style.display = 'none';
                }
            });

            // Pagination functionality (simplified for demo)
            const paginationLinks = document.querySelectorAll('.pagination-link');
            paginationLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (link.classList.contains('prev') || link.classList.contains('next')) {
                        return; // In a real app, you would handle pagination navigation
                    }

                    paginationLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');

                    // In a real app, you would load the corresponding page of requests
                    // For this demo, we're just changing the active page indicator
                });
            });
        });
    </script>
</body>
</html>